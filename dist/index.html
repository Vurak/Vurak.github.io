<!DOCTYPE html>

<head>
    <title>test</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-purple-even-darker no-scrollbar">

    <div id="root"></div>

    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/javascript" src="../node_modules/rellax/rellax.min.js"></script>

    <script type="text/babel">

        function RandInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        

        var heights = ["10", "1/6", "1/5", "1/3", "2/5", "1/2", "3/5", "2/3", "3/4", "4/5", "5/6", "full"]
        var colors = [6, 6, 6, 7, 7, 7, 8, 8, 8, 8, 8, 8]
        

        function Landing() {
            const [mult, setMult] = React.useState(10)

            React.useEffect(() => {
                new Rellax('.rellax', {
                    breakpoints: [640, 768, 1024]
                })
            }, [])

            function Bars({minSpeed, maxSpeed, color, i}) {
                var barsTop = []
                var barsBot = []

                let n = Math.floor(window.innerWidth/25)
                
                function Bar(props) {
                    console.log("rendered bar")
                    
                    return (
                        
                        <div 
                        className={`flex flex-auto rellax w-full z-0 bg-indigo-${props.c+"00"} ${(props.i==0 || props.i==1) ? 'mx-0' : '-mx-px'} rounded${props.loc ? "-" + props.loc : ""}-full`} 
                        style={{'height' : `${props.h}%`}}
                        data-rellax-speed={`${props.s}`}
                        data-rellax-xs-speed={`${props.s*1.3}`}
                        data-rellax-mobile-speed={`${props.s*1.3}`}
                        data-rellax-tablet-speed={`${props.s}`}
                        data-rellax-desktop-speed={`${props.s}`}
                        />
                    )
                }
                
                

                for (let i = 0; i <= n; i++) {
                    let rs = RandInt(minSpeed,maxSpeed)
                    let rh = 100 * (i / (n))+1
                    barsTop.push(<Bar h={rh} loc="b" s={rs} c={color} i={i/n}/>)
                    barsBot.push(<Bar h={rh} loc="t" s={-rs} c={color} i={i/n}/>)
                }

                barsBot.reverse()

                return ([
                    <div class="flex flex-none absolute w-full h-full top-0 items-start z-0">
                        {barsTop}
                    </div>,
                    <div class="flex flex-none absolute w-full h-full bot-0 items-end z-0 overflow-y-hidden">
                        {barsBot}
                    </div>
                ])
            }

            return(
                <section className="h-screen w-full">
                    <div className="h-full2">
                        <div className="flex sticky top-0 justify-center items-center h-screen w-auto text-center">

                            <header className="shadow-sm absolute w-auto bg-purple-even-darker z-0">
                                    <div className="relative text-center object-center content-center items-center p-4">
                                        <div className="flex relative w-full h-2/3 items-start z-10">
                                            </div>
                                            {/**<input type="range" min="1" max="500" value={mult} onChange={event => { setMult(event.target.value)}} className="hidden md:inline h-5 slider rounded-lg bg-indigo-200"
                                        />**/}
                                        <span className="text-lg font-bold text-indigo-200">Hi, I'm Fred</span>
                                        <h1 className="text-indigo-400 text-3xl font-sans font-extrabold">welcome to my portfolio</h1>
                                        <span className="text-sm font-bold text-indigo-200 animate-pulse">(keep scrolling)</span>
                                        <svg className="animate-pulse relative h-5 w-full fill-current text-indigo-200" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                                        </svg>
                                    </div>
                            </header>
                            <Bars minSpeed={6} maxSpeed={8} color={6} extraHeight={10}/>
                            <Bars minSpeed={9} maxSpeed={12} color={5} extraHeight={5}/>
                            <Bars minSpeed={13} maxSpeed={16} color={4} />

                        </div>
                    </div>
                </section>
            )
        }

        function Title({text='', children}) {
            console.log("rendered title")
            return (
                <div className="relative flow flex-wrap h-20 w-full content-center items-center text-center font-bold">
                    <div className="w-full px-6 py-4">
                        <div className="font-bold text-3xl text-indigo-400">{children}</div>
                        <p className="text-gray-300 text-base">
                            {text}
                        </p>
                        <hr className="m-auto self-center w-1/2 border-1 mt-1"/>
                    </div>
                </div>
            )
        }

        function TextElement(props) {
            return(
                <div className={`px-6 py-3 ${props.c ? 'text-center' : ''}`}>
                    {props.title ? <div className="font-bold text-xl text-indigo-400 mb-2 z-20">{props.title}</div> : null}
                    <p className="relative text-gray-300 font-bold text-base z-20 overflow-hidden">
                        {props.children}
                    </p>
                </div>
            )
        }

        function GridElement({title, imgUrl, span=1, children}) {
            console.log("rendered grid element")
            const [expand, setExpand] = React.useState(false)
            return (
                <div className={`col-span-1 md:col-span-${span-1} xl:col-span-${span} relative h-300 w-full py-5 px-5 font-bold`} data-rellax-speed="2">
                    <div className="rounded w-full h-full overflow-hidden my-5 mx-2 md:mx-5 bg-gray-900 shadow-xl  border-indigo-400 border-t-6 md:border-t-0 md:border-l-8 md:hover:border-l-20 hover:bg-gray-700 duration-200">
                        
                        <TextElement title={title}>{children}</TextElement>
                    </div>
                </div>
            )
        }

        function Drop({o="100", ...props}) {
            console.log("rendered bar")
            return (
                <div 
                className={`flex opacity-${o} absolute rellax-rain w-4 z-${props.z} bg-indigo-${(props.c-1)*100} mx-px md:mx-0.2 rounded-lg`} 
                style={{'height' : `${props.h}rem`, 'top': `${props.t}%`, 'left': `${props.l}%`}}
                data-rellax-speed={`${props.s}`}/>
            )
        }

        var dropsFront = []
        var dropsBack = []


        function Contents() {
            React.useEffect(() => {
                new Rellax('.rellax-rain')
            }, [])

            let n = Math.floor(window.innerWidth/50)
            
            for (let i = 1; i <= n; i++) {
                let rh = RandInt(1,7)
                let rs = RandInt(1,7)
                let rc = RandInt(0,heights.colors-1)
                let rt = Math.round(Math.random() * 100) + 50
                let rl = Math.round(Math.random() * 97)
                dropsFront.push(<Drop h={rh} s={rs} c={colors[rs]} t={rt} l={rl} z="20" o="10"/>)
                
            }
            for (let i = 1; i <= n; i++) {
                let rh = RandInt(1,7)
                let rs = RandInt(1,7)
                let rc = RandInt(0,heights.colors-1)
                let rt = Math.round(Math.random() * 100) + 50
                let rl = Math.round(Math.random() * 99)
                dropsBack.push(<Drop h={rh} s={rs} c={colors[rs]} t={rt} l={rl} z="0" o="40"/>)
            }

            return (
                <section className="h-screen">
                    <div className="h-full2 relative items-end justify-items-end ">
                        <div className="relative flow flex-row items-end top-0 h-1/2 w-full flex-wrap"></div>
                        <div className="rain-rellax-wrapper relative flow flex-row items-end bg-purple-even.darker bottom-0 w-full">
                            {dropsFront}{dropsBack}
                            <Title>About me</Title>
                            <TextElement c="true"> I'm a young game and web developer looking to get into the industry and put my skills to use. Lorem ipsum dolor sit amet consectetur, adipisicing elit. <br/>Possimus dolor et dolores rem minima illum assumenda odio dolorum cum? Totam facilis nobis ratione porro veniam<br/> accusantium eum, repudiandae recusandae minus.</TextElement>
                            <Title>Projects</Title>
                            <div class="grid grid-cols-1 md:grid-cols-2  xl:grid-cols-3 relative px-8 md:px-20 w-full h-screen">
                                <GridElement title="Dog Nights" imgUrl="../img/stove.png" span={3}> 
                                    A solo project made in the Unity3D engine
                                </GridElement>
                                <GridElement title="Dog Nights Game" imgUrl="../img/genbot.png"> 
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis eum veritatis neque nisi, 
                                    enim illum fugit fuga corrupti minima labore dolores reiciendis aliquid, laudantium quam beatae 
                                    sint atque rerum modi.    
                                </GridElement>
                                <GridElement title="Dog Nights Game" imgUrl="../img/genbot.png"> 
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis eum veritatis neque nisi, 
                                    enim illum fugit fuga corrupti minima labore dolores reiciendis aliquid, laudantium quam beatae 
                                    sint atque rerum modi.    
                                </GridElement>
                                <GridElement title="Dog Nights Game" imgUrl="../img/genbot.png"> 
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis eum veritatis neque nisi, 
                                    enim illum fugit fuga corrupti minima labore dolores reiciendis aliquid, laudantium quam beatae 
                                    sint atque rerum modi.    
                                </GridElement>
                                <GridElement title="Dog Nights Game" imgUrl="../img/genbot.png"> 
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis eum veritatis neque nisi, 
                                    enim illum fugit fuga corrupti minima labore dolores reiciendis aliquid, laudantium quam beatae 
                                    sint atque rerum modi.    
                                </GridElement>
                                <GridElement title="Dog Nights Game" imgUrl="../img/genbot.png"> 
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis eum veritatis neque nisi, 
                                    enim illum fugit fuga corrupti minima labore dolores reiciendis aliquid, laudantium quam beatae 
                                    sint atque rerum modi.    
                                </GridElement>
                            </div>
                        
                        </div>
                    </div>
                </section>
            )
        }

        // function Sidebar (sidebar) {
            
        //     return(
        //         <div key="asdad"
        //             className={"sidebar bg-gray-700 text-blue-100 w-64 space-y-6 py-7 absolute inset-y-0 left-0 transform" + (sidebar ? " " : " -translate-x-full ") + "md:relative md:translate-x-0 transition duration-200 ease-in-out"}>
        //             {console.log(sidebar ? "hidden" : "-translate-x-full")}
        //             {/* LOGO */}
        //             <a href="#" className="text-white flex items-center space-x-2 px-4">
        //                 <svg className="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        //                     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2"
        //                         d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
        //                 </svg>
        //                 <span className="text-2xl font-extrabold">Better Dev</span>
        //             </a>

        //             <nav>
        //                 <a href="" className="block py-2.5 px-4 transition duration-200 hover:bg-green-500 hover:text-black">
        //                     Resume
        //                 </a>
        //                 <a href="" className="block py-2.5 px-4 transition duration-200 hover:bg-green-500 hover:text-black">
        //                     About
        //                 </a>
        //                 <a href="" className="block py-2.5 px-4 transition duration-200 hover:bg-green-500 hover:text-black">
        //                     Features
        //                 </a>
        //                 <a href="" className="block py-2.5 px-4 transition duration-200 hover:bg-green-500 hover:text-black">
        //                     Pricing
        //                 </a>
        //             </nav>
        //         </div>
        //     )
        // }

        function App() {
            const [sidebar, setSidebar] = React.useState(false)
            return(
                [
                    <div class="absolute w-full no-scrollbar">
                        <Landing/>
                        <Contents/>
                        
                    </div>
                ]
            )
        }

        console.log("rendered")
        ReactDOM.render(<App />, document.getElementById('root'))
      </script>
</body>